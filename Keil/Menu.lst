C51 COMPILER V9.01   MENU                                                                  07/22/2018 03:23:45 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MENU
OBJECT MODULE PLACED IN .\Menu.obj
COMPILER INVOKED BY: D:\Kell\C51\BIN\C51.EXE ..\Src\Menu.c BROWSE DEBUG OBJECTEXTEND PRINT(.\Menu.lst) OBJECT(.\Menu.obj
                    -)

line level    source

   1          #include "RM.h"
   2          #include "Menu.h"
   3          #include "Timer.h"
   4          #include "Key.h"
   5          #include "LCD1602.h"
   6          
   7          #define MENUID_DEBUG_MODE_ON    0                                       //ËèúÂçïÈÄâÈ°πIDÁöÑÂÆèÂÆö‰πâ
   8          #define MENUID_SIEVE_MODE_ON    1
   9          #define MENUID_SET_SIEVE        3
  10          #define MENUID_START_PLOT       4
  11          #define MENUID_RESET_DEVICE     5
  12          #define MENUID_EXIT             6
  13          #define MENUID_DEBUG_YES                7
  14          #define MENUID_DEBUG_NO                 8
  15          #define MENUID_SIEVE_YES        9               
  16          #define MENUID_SIEVE_NO                 10      
  17          #define MENUID_AVERGE_YES       11
  18          #define MENUID_AVERGE_NO                12
  19          #define MENUID_AVERG_MODE_ON    13      
  20          
  21          #define MENU_OPTION_NUM_MAIN    7                                       //ËèúÂçïÊù°ÁõÆÊï∞ÁöÑÂÆèÂÆö‰πâ
  22          #define MENU_OPTION_NUM_YN              2
  23          
  24          typedef struct MenuRecord *ptrToMenuRecord;                     //ÂÆö‰πâÊåáÂêëËèúÂçïËÆ∞ÂΩïÁöÑÊåáÈíà
  25          typedef ptrToMenuRecord   Menu;                                         //ÊåáÂêëËèúÂçïËÆ∞ÂΩïÁöÑÊåáÈíàÁõ¥Êé•Âè´Menu
  26          typedef struct MenuOp     *ptrToMenuOp;                         //ÊåáÂêëËèúÂçïÈÄâÈ°πÁöÑÊåáÈíà
  27          
  28          struct MenuOp{                                                                          //ËèúÂçïÈÄâÈ°πÁöÑÁªìÊûÑ
  29                  uchar opID;                                                                             //ÈÄâÈ°πÁöÑID
  30                  char *opString;                                                                 //ÈÄâÈ°πÊòæÁ§∫ÁöÑÂ≠óÁ¨¶‰∏≤
  31                  Menu subMenu;                                                                   //ÈÄâÈ°πÁöÑÂ≠êËèúÂçï
  32                  void (*pOpFunc) (void);                                                 //ÈÄâÊã©ËØ•ÈÄâÈ°πÊâßË°åÁöÑÂáΩÊï∞
  33          };
  34          
  35          struct MenuRecord{                                                                      //ËèúÂçïËÆ∞ÂΩïÁöÑÁªìÊûÑ
  36                  uchar opNum;                                                                    //ËØ•ËèúÂçïÈÄâÈ°πÁöÑÊù°ÁõÆÊï∞
  37                  Menu superMenu;                                                                 //ËØ•ËèúÂçïÁöÑ‰∏ä‰∏ÄÁ∫ßËèúÂçï
  38                  ptrToMenuOp OpArray;                                                    //ËØ•ËèúÂçïÁöÑÊù°ÁõÆÊï∞ÁªÑ
  39          };
  40          
  41          static code struct MenuOp debugYNOpArray[MENU_OPTION_NUM_YN]={                                                          //Yes No ËèúÂçïÁöÑÈÄâÈ°πÊï∞ÁªÑ
  42                  {MENUID_DEBUG_YES,"Yes",NULL,MenuOpYN},
  43                  {MENUID_DEBUG_NO,"No",NULL,MenuOpYN}
  44          };
  45          static struct MenuRecord debugYNMenuRecord={MENU_OPTION_NUM_YN,NULL,debugYNOpArray};            //Yes No  ËèúÂçïÁöÑË
             -èúÂçïËÆ∞ÂΩï
  46          static code Menu debugYNMenu=&debugYNMenuRecord;                                                                                        //Áî®Âè´ÂÅöynMenuÁöÑÊåáÈíàÊåáÂêëËÆ∞ÂΩï
  47          
  48          static code struct MenuOp sieveYNOpArray[MENU_OPTION_NUM_YN]={                                                          //Yes No ËèúÂçïÁöÑÈÄâÈ°πÊï∞ÁªÑ
  49                  {MENUID_SIEVE_YES,"Yes",NULL,MenuOpYN},
  50                  {MENUID_SIEVE_NO,"No",NULL,MenuOpYN}
  51          };
  52          static struct MenuRecord sieveYNMenuRecord={MENU_OPTION_NUM_YN,NULL,sieveYNOpArray};            //Yes No  ËèúÂçïÁöÑË
             -èúÂçïËÆ∞ÂΩï
C51 COMPILER V9.01   MENU                                                                  07/22/2018 03:23:45 PAGE 2   

  53          static code Menu sieveYNMenu=&sieveYNMenuRecord;                                                                                        //Áî®Âè´ÂÅöynMenuÁöÑÊåáÈíàÊåáÂêëËÆ∞ÂΩï
  54          
  55          static code struct MenuOp avergYNOpArray[MENU_OPTION_NUM_YN]={                                                          //Yes No ËèúÂçïÁöÑÈÄâÈ°πÊï∞ÁªÑ
  56                  {MENUID_AVERGE_YES,"Yes",NULL,MenuOpYN},
  57                  {MENUID_AVERGE_NO,"No",NULL,MenuOpYN}
  58          };
  59          static struct MenuRecord avergYNMenuRecord={MENU_OPTION_NUM_YN,NULL,avergYNOpArray};            //Yes No  ËèúÂçïÁöÑË
             -èúÂçïËÆ∞ÂΩï
  60          static code Menu avergYNMenu=&avergYNMenuRecord;                                                                                        //Áî®Âè´ÂÅöynMenuÁöÑÊåáÈíàÊåáÂêëËÆ∞ÂΩï
  61          
  62          static code struct MenuOp MainMenuOpArray[MENU_OPTION_NUM_MAIN]={                                                       //mainËèúÂçïÁöÑÈÄâÈ°πÊï∞ÁªÑ                             
  63                  {MENUID_DEBUG_MODE_ON,"Debug Mode On",&debugYNMenuRecord,NULL},
  64                  {MENUID_AVERG_MODE_ON,"Averg Mode On",&avergYNMenuRecord,NULL},
  65                  {MENUID_SIEVE_MODE_ON,"Sieve Mode On",&sieveYNMenuRecord,NULL},
  66                  {MENUID_SET_SIEVE,"Set Sieve",NULL,MenuOpSetSieve},
  67                  {MENUID_START_PLOT,"Start Plot",NULL,MenuOpStartPlot},
  68                  {MENUID_RESET_DEVICE,"Reset Device",NULL,MenuOpRstDev},
  69                  {MENUID_EXIT,"Exit",NULL,MenuOpExit}
  70          };
  71          static code struct MenuRecord mainMenuRecord={MENU_OPTION_NUM_MAIN,NULL,MainMenuOpArray};       //mainËèúÂçïÁöÑË
             -èúÂçïËÆ∞ÂΩï
  72          static code Menu mainMenu=&mainMenuRecord;                                                                                                  //Áî®Âè´ÂÅömainMenuÁöÑÊåáÈíàÊåáÂêëËÆ∞ÂΩï
  73          
  74          static Menu  curMenu;                                                           //ÊåáÂêëÂΩìÂâçËèúÂçïÁöÑËÆ∞ÂΩï
  75          static char curOp;                                                                      //ÂΩìÂâçÊù°ÁõÆ
  76          
  77          static bit isExit;                                                                      //Ê∂àÊÅØÂèòÈáèÔºöÊòØÂê¶ÈÄÄÂá∫ËèúÂçï
  78          
  79          extern bit   isSieveOn;                                                         //Ê∂àÊÅØÂèòÈáè:Á≠õÈÄâÊòØÂê¶ÊâìÂºÄ
  80          extern float sieveRVal;                                                         //Á≠õÈÄâÁîµÈòªÁöÑ‰∏≠ÂøÉÂÄº
  81          extern float errTolr;                                                           //ËØØÂ∑ÆÈôê
  82          extern bit   isDebug;                                                           //Ê∂àÊÅØÂèòÈáè:Ë∞ÉËØïÊ®°ÂºèÊâìÂºÄ
  83          extern bit   isAverg;
  84          
  85          sbit    Led1 = P1^0;                                                            //LedÂèòÈáè
  86          sbit    Led2 = P1^1;
  87          sbit    Led3 = P1^2;
  88          
  89          extern bit isKeyEvents;
  90          extern bit isTimerEvent;
  91          
  92          extern uchar key1Events;
  93          extern uchar key2Events;
  94          extern uchar key3Events;
  95          
  96          static uint  rNumPart;                                                          //Á≠õÈÄâÁîµÈòªÁöÑ‰∏â‰ΩçÊï∞Â≠óÈÉ®ÂàÜ
  97          static uchar rUnit;                                                                     //Á≠õÈÄâÁîµÈòªÁöÑÂçï‰ΩçÔºåÂèØ‰ª•ÊòØ 0x20 'K' 'M'
  98          static uchar errTolrE2;                                                         //ËØØÂ∑ÆÈôê*100
  99          /**
 100           * ÂàùÂßãÂåñËèúÂçï
 101           * @Author   Xiaobo     Yang
 102           * @DateTime 2018-07-21
 103           * @Summury
 104           */
 105          void InitialMenu(){
 106   1              debugYNMenu->superMenu=mainMenu;                                //ËèúÂçïÂâçÂêé‰∫íÊåáÔºåÂõ†Ê≠§‰∏ÄÈÉ®ÂàÜÊåáÂêëÂ∑•‰ΩúË¶ÅÂà∞Á®ãÂ∫èÂÆåÊàê
 107   1              sieveYNMenu->superMenu=mainMenu;
 108   1              avergYNMenu->superMenu=mainMenu;
 109   1              curMenu=mainMenu;                                                               //ÂàùÂßãÂåñÊâÄÊúâÊúâÂÖ≥ÂÖ®Â±ÄÂèòÈáè
 110   1              curOp=0;
 111   1              isExit=0;
 112   1              isSieveOn=0;
C51 COMPILER V9.01   MENU                                                                  07/22/2018 03:23:45 PAGE 3   

 113   1              sieveRVal=0.0;
 114   1              errTolr=0.0;
 115   1              rNumPart=0;
 116   1              rUnit=0x20;
 117   1              errTolrE2=0;
 118   1              isDebug=1;
 119   1      }
 120          /**
 121           * ÊâìÂºÄËèúÂçï
 122           * @Author   Xiaobo     Yang
 123           * @DateTime 2018-07-21
 124           * @Summury
 125           */
 126          void MenuImpl(){
 127   1              curMenu=mainMenu;                                                               //‰ªéÂ§¥ÂºÄÂßãÊòæÁ§∫ËèúÂçï
 128   1              curOp=0;
 129   1              isExit=0;
 130   1              ShowMenu();
 131   1              SwitchTimerFun(TIMERFUN_KEY_SCAN);                              //ÂºÄÂßãÈîÆÁõòÊâ´Êèè
 132   1              StartTimer();
 133   1              while(!isExit){
 134   2                      if(isKeyEvents){
 135   3                              SwitchTimerFun(TIMERFUN_HALT);                  //TODO:ÊàñËÆ∏ÂèØ‰ª•‰ºòÂåñÊéâ
 136   3                              MenuKeyTreat();
 137   3                              SwitchTimerFun(TIMERFUN_KEY_SCAN);              //ÈáçÂêØÈîÆÁõòÊâ´Êèè
 138   3                              StartTimer();
 139   3                      }
 140   2              }
 141   1      }
 142          /**
 143           * ÊòæÁ§∫ËèúÂçï
 144           * @Author   Xiaobo     Yang
 145           * @DateTime 2018-07-21
 146           * @Summury
 147           */
 148          void ShowMenu(){
 149   1              LCDCls();
 150   1              if(curOp!=0){
 151   2                      LCDMoveCursor(1,0);                                                                             //Ê≠§Â§ÑÊúâËé´ÂêçÂÖ∂Â¶ôÁöÑbugÔºåÈúÄË¶Å‰∏ìÈó®ÈáçËÆæÂÖâÊ†á
 152   2                      LCDPrintStr(1,0,curMenu->OpArray[curOp-1].opString);
 153   2                      LCDPrintStr(1,1,curMenu->OpArray[curOp].opString);
 154   2                      LCDPrintChar(0,1,'>');
 155   2              }
 156   1              else{
 157   2                      LCDMoveCursor(1,0);
 158   2                      LCDPrintStr(1,0,curMenu->OpArray[curOp].opString);
 159   2                      LCDPrintStr(1,1,curMenu->OpArray[curOp+1].opString);
 160   2                      LCDPrintChar(0,0,'>');
 161   2              }
 162   1      }
 163          /**
 164           * Â§ÑÁêÜËèúÂçïÊ®°Âºè‰∏ãÁöÑÊåâÈîÆ‰ø°ÊÅØ
 165           * @Author   Xiaobo     Yang
 166           * @DateTime 2018-07-21
 167           * @Summury
 168           */
 169          void MenuKeyTreat(){
 170   1              if(key1Events){                                                                                 //key1‰ºòÂÖàÁ∫ß>key2‰ºòÂÖàÁ∫ß>key3‰ºòÂÖàÁ∫ß
 171   2                      switch(key1Events){
 172   3                              case SHORT_PRESS:
 173   3                                      curOp=(++curOp)%(curMenu->opNum);                       //Âêë‰∏ãÈÄâÊã©
 174   3                                      ShowMenu();
C51 COMPILER V9.01   MENU                                                                  07/22/2018 03:23:45 PAGE 4   

 175   3                                      break;
 176   3                              case LONG_PRESS:
 177   3                                      curOp=curMenu->opNum-1;
 178   3                                      ShowMenu();
 179   3                                      break;
 180   3                      }
 181   2              }
 182   1              else if(key2Events){
 183   2                      switch(key2Events){
 184   3                              case SHORT_PRESS:                                                               //Âêë‰∏äÈÄâÊã©
 185   3                                      curOp=((--curOp)<0?curOp+(curMenu->opNum):curOp);       
 186   3                                      ShowMenu();
 187   3                                      break;
 188   3                              case LONG_PRESS:
 189   3                                      curOp=0;
 190   3                                      ShowMenu();
 191   3                                      break;
 192   3                      }
 193   2              }
 194   1              else{
 195   2                      switch(key3Events){
 196   3                              case SHORT_PRESS:
 197   3                              if(curMenu->OpArray[curOp].subMenu!=NULL){
 198   4                                      curMenu=curMenu->OpArray[curOp].subMenu;        //ËøõÂÖ•Â≠êËèúÂçï
 199   4                                      curOp=0;
 200   4                                      ShowMenu();
 201   4                              }
 202   3                              else{
 203   4                                      KeyInitial();                                                           //ÂàùÂßãÂåñÂ§ñËÆæÔºåÊó∂ÈíüÂ∑≤ÁªèÂú®MenuImpl‰∏≠ÂÅúÊ≠¢
 204   4                                      isExit=1;                                                                       //ËÆæÂÆöÈÄÄÂá∫Ê®°Âºè
 205   4                                      (*(curMenu->OpArray[curOp].pOpFunc)) ();        //ÊâßË°åÈÄâÈ°πÁöÑÂáΩÊï∞
 206   4                              }       
 207   3                                      break;
 208   3                              case LONG_PRESS:                                                                //ÈïøÊåâÂèØ‰ª•ÂõûÂà∞‰∏äÁ∫ßËèúÂçï
 209   3                                      if(curMenu->superMenu!=NULL){
 210   4                                              curMenu=curMenu->superMenu;
 211   4                                              curOp=0;
 212   4                                              ShowMenu();
 213   4                                      }
 214   3                                      break;
 215   3                              default:
 216   3                                      break;
 217   3                      }
 218   2              }
 219   1              RstKeyEvents();
 220   1      }
 221          /**
 222           * ‰ªÄ‰πàÈÉΩ‰∏çÂÅö
 223           * @Author   Xiaobo     Yang
 224           * @DateTime 2018-07-21
 225           * @Summury
 226           */
 227          void MenuOpExit(){
 228   1              return;
 229   1      }
 230          /**
 231           * Âà©Áî®IAP_CONTRËøõË°åËΩØ‰ª∂Â§ç‰Ωç
 232           * @Author   Xiaobo     Yang
 233           * @DateTime 2018-07-21
 234           * @Summury
 235           */
 236          void MenuOpRstDev(){
C51 COMPILER V9.01   MENU                                                                  07/22/2018 03:23:45 PAGE 5   

 237   1              uint i=3000;
 238   1              Led3=Led2=Led1=0;                                                                               //ÁÅ≠ÁÅØÔºåÁ≠âÂæÖÊøÄÂä®‰∫∫ÂøÉÁöÑ‰∏ÄÂàª
 239   1              SwitchTimerFun(TIMERFUN_KEY_SCAN);
 240   1              StartTimer();
 241   1              while(i){
 242   2                      if(isTimerEvent){
 243   3                              isTimerEvent=0;
 244   3                              i--;                                                                                    //ÊØè0.5msËÆ©iÂáè‰∏ÄÔºå0.5S‰∫Æ‰∏Ä‰∏™ÁÅØ
 245   3                              if(i==2000){
 246   4                                      Led3=1;
 247   4                              }
 248   3                              else if(i==1000){
 249   4                                      Led2=1;
 250   4                              }
 251   3                      }
 252   2                      if(isKeyEvents){                                                                        //Â¶ÇÊúâÈîÆÁõò‰∫ã‰ª∂ÔºåÁ´ãÂç≥‰∏≠Êñ≠ÂáΩÊï∞ÊâßË°å
 253   3                              Led3=Led2=0;
 254   3                              return;
 255   3                      }
 256   2              }
 257   1              Led1=1;
 258   1              delaynms(500);
 259   1              ISP_CONTR=0x60;                                                                                 //ËΩØ‰ª∂Â§ç‰Ωç
 260   1      }
 261          /**
 262           * YNËèúÂçïÊâßË°åÔºåÁî®‰∫éÊîπÂèòdebugÂíåsieveÊ®°Âºè
 263           * @Author   Xiaobo     Yang
 264           * @DateTime 2018-07-21
 265           * @Summury
 266           */
 267          void MenuOpYN(){
 268   1              switch(curMenu->OpArray[curOp].opID){
 269   2                      case MENUID_DEBUG_YES:
 270   2                              isDebug=1;
 271   2                              break;
 272   2                      case MENUID_DEBUG_NO:
 273   2                              isDebug=0;
 274   2                              break;
 275   2                      case MENUID_SIEVE_YES:
 276   2                              isSieveOn=1;
 277   2                              break;
 278   2                      case MENUID_SIEVE_NO:
 279   2                              isSieveOn=0;
 280   2                              break;
 281   2                      case MENUID_AVERGE_YES:
 282   2                              isAverg=1;
 283   2                              break;
 284   2                      case MENUID_AVERGE_NO:
 285   2                              isAverg=0;
 286   2                              break;
 287   2              }
 288   1      }
 289          /**
 290           * ËΩ¨Âä®ËàµÊú∫ÁîªÊõ≤Á∫ø
 291           * @Author   Xiaobo     Yang
 292           * @DateTime 2018-07-21
 293           * @Summury
 294           */
 295          void MenuOpStartPlot(){
 296   1              //////////////////////
 297   1              //TODO:NOT FINISHED //
 298   1              //////////////////////
C51 COMPILER V9.01   MENU                                                                  07/22/2018 03:23:45 PAGE 6   

 299   1              return;
 300   1      }
 301          /**
 302           * ËÆæÁΩÆÁ≠õÈÄâÊù°‰ª∂
 303           * @Author   Xiaobo     Yang
 304           * @DateTime 2018-07-21
 305           * @Summury
 306           */
 307          void MenuOpSetSieve (){
 308   1              uchar curDigit=0;
 309   1              uchar isBreak=0;
 310   1              LCDCls();
 311   1              LCDPrintNumFixdgt(0,0,rNumPart,3);
 312   1              LCDPrintChar(3,0,rUnit);
 313   1              LCDPrintChar(curDigit,1,'^');
 314   1              SwitchTimerFun(TIMERFUN_KEY_SCAN);
 315   1              StartTimer();
 316   1              while(!isBreak){
 317   2                      if(isKeyEvents){
 318   3                              if(key1Events){
 319   4                                      switch(key1Events){
 320   5                                              case SHORT_PRESS:
 321   5                                                      switch(curDigit){
 322   6                                                              case 0:
 323   6                                                                      rNumPart=(rNumPart+100)%1000;
 324   6                                                                      break;
 325   6                                                              case 1:
 326   6                                                                      rNumPart=(rNumPart+10)%1000;
 327   6                                                                      break;
 328   6                                                              case 2:
 329   6                                                                      rNumPart=(rNumPart+1)%1000;
 330   6                                                                      break;
 331   6                                                              case 3:
 332   6                                                                      switch(rUnit){
 333   7                                                                              case 0x20:
 334   7                                                                                      rUnit='K';
 335   7                                                                                      break;
 336   7                                                                              case 'K':
 337   7                                                                                      rUnit='M';
 338   7                                                                                      break;
 339   7                                                                              case 'M':
 340   7                                                                                      rUnit=0x20;
 341   7                                                                                      break;
 342   7                                                                      }
 343   6                                                              break;
 344   6                                                      }
 345   5                                                      break;
 346   5                                              case LONG_PRESS:
 347   5                                                      switch(curDigit){
 348   6                                                              case 0:
 349   6                                                                      rNumPart%=100;
 350   6                                                                      break;
 351   6                                                              case 1:
 352   6                                                                      rNumPart-=((rNumPart%100)/10)*10;
 353   6                                                                      break;
 354   6                                                              case 2:
 355   6                                                                      rNumPart-=rNumPart%10;
 356   6                                                                      break;
 357   6                                                              case 3:
 358   6                                                                      rUnit=0x20;
 359   6                                                                      break;
 360   6                                                      }
C51 COMPILER V9.01   MENU                                                                  07/22/2018 03:23:45 PAGE 7   

 361   5                                                      break;
 362   5                                      }
 363   4                                      LCDPrintNumFixdgt(0,0,rNumPart,3);
 364   4                                      LCDPrintChar(3,0,rUnit);
 365   4                              }
 366   3                              else if(key2Events){
 367   4                                      LCDPrintChar(curDigit,1,0x20);
 368   4                                      switch(key2Events){
 369   5                                              case SHORT_PRESS:
 370   5                                                      curDigit=++curDigit%4;
 371   5                                                      break;
 372   5                                              case LONG_PRESS:
 373   5                                                      if(curDigit==3){
 374   6                                                              curDigit=0;
 375   6                                                      }
 376   5                                                      else{
 377   6                                                              curDigit=3;
 378   6                                                      }
 379   5                                                      break;
 380   5                                      }
 381   4                                      LCDPrintChar(curDigit,1,'^');
 382   4                              }
 383   3                              else{
 384   4                                      switch(key3Events){
 385   5                                              case SHORT_PRESS:
 386   5                                                      isBreak=1;
 387   5                                                      break;
 388   5                                              default:
 389   5                                                      break;
 390   5                                      }
 391   4                              }
 392   3                              RstKeyEvents(); 
 393   3                      }
 394   2              }
 395   1              curDigit=0;
 396   1              isBreak=0;
 397   1              LCDCls();
 398   1              LCDPrintNumFixdgt(0,0,errTolrE2,2);
 399   1              LCDPrintChar(2,0,'%');
 400   1              LCDPrintChar(curDigit,1,'^');
 401   1              while(!isBreak){
 402   2                      if(isKeyEvents){
 403   3                              if(key1Events){
 404   4                                      switch(key1Events){
 405   5                                              case SHORT_PRESS:
 406   5                                                      switch(curDigit){
 407   6                                                              case 0:
 408   6                                                                      errTolrE2=(errTolrE2+10)%100;
 409   6                                                                      break;
 410   6                                                              case 1:
 411   6                                                                      errTolrE2=(++errTolrE2)%100;
 412   6                                                                      break;
 413   6                                                      }
 414   5                                                      break;
 415   5                                              case LONG_PRESS:
 416   5                                                      switch(curDigit){
 417   6                                                              case 0:
 418   6                                                                      errTolrE2%=10;
 419   6                                                                      break;
 420   6                                                              case 1:
 421   6                                                                      errTolrE2-=errTolrE2%10;
 422   6                                                                      break;
C51 COMPILER V9.01   MENU                                                                  07/22/2018 03:23:45 PAGE 8   

 423   6                                                      }
 424   5                                                      break;
 425   5                                      }
 426   4                                      LCDPrintNumFixdgt(0,0,errTolrE2,2);
 427   4                              }
 428   3                              else if(key2Events){
 429   4                                      LCDPrintChar(curDigit,1,0x20);
 430   4                                      switch(key2Events){
 431   5                                              case SHORT_PRESS:
 432   5                                                      curDigit=(++curDigit)%2;
 433   5                                                      break;
 434   5                                              case LONG_PRESS:
 435   5                                                      curDigit=0;
 436   5                                                      break;
 437   5                                      }
 438   4                                      LCDPrintChar(curDigit,1,'^');
 439   4                              }
 440   3                              else{
 441   4                                      switch(key3Events){
 442   5                                              case SHORT_PRESS:
 443   5                                                      isBreak=1;
 444   5                                                      break;
 445   5                                              default:
 446   5                                                      break;
 447   5                                      }
 448   4                              }
 449   3                              RstKeyEvents();
 450   3                      }
 451   2              }
 452   1              switch(rUnit){
 453   2                      case 0x20:
 454   2                              sieveRVal=rNumPart;
 455   2                              break;
 456   2                      case 'K':
 457   2                              sieveRVal=rNumPart*1e3;
 458   2                              break;
 459   2                      case 'M':
 460   2                              sieveRVal=rNumPart*1e6;
 461   2                              break;
 462   2              }
 463   1              errTolr=(float) errTolrE2/100.0;
 464   1              LCDCls();
 465   1              LCDPrintNumFixdgt(0,0,rNumPart,3);
 466   1              LCDPrintChar(3,0,rUnit);
 467   1              LCDPrintNumFixdgt(0,1,errTolrE2,2);
 468   1              LCDPrintFloat(8,0,sieveRVal);
 469   1              LCDPrintFloat(8,1,errTolr);
 470   1              delaynms(3000);
 471   1      }
 472          
 473          
 474          
 475          
 476          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1602    ----
   CONSTANT SIZE    =    237    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     29       4
C51 COMPILER V9.01   MENU                                                                  07/22/2018 03:23:45 PAGE 9   

   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
